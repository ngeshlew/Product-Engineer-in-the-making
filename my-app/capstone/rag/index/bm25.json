[["title", "python", "langchain", "com", "docs", "concepts", "streaming", "slug", "python", "langchain", "com", "docs", "concepts", "streaming", "tags", "source", "why_for_designers", "todo", "bot_application", "todo", "collaboration_prompts", "what", "retrieval", "strategy", "applies", "here", "sources", "url", "https", "python", "langchain", "com", "docs", "concepts", "streaming", "title", "python", "langchain", "com", "docs", "concepts", "streaming", "author", "license", "internal", "copy", "retrieved_at", "2025", "08", "17", "policy", "copy", "figures", "updated_at", "2025", "08", "17", "completed", "false", "python", "langchain", "com", "docs", "concepts", "streaming", "synthesis", "todo", "streaming", "streaming", "is", "crucial", "for", "enhancing", "the", "responsiveness", "of", "applications", "built", "on", "llms", "by", "displaying", "output", "progressively", "even", "before", "a", "complete", "response", "is", "ready", "streaming", "significantly", "improves", "user", "experience", "ux", "particularly", "when", "dealing", "with", "the", "latency", "of", "llms", "overview", "generating", "full", "responses", "from", "llms", "often", "incurs", "a", "delay", "of", "several", "seconds", "which", "becomes", "more", "noticeable", "in", "complex", "applications", "with", "multiple", "model", "calls", "fortunately", "llms", "generate", "responses", "iteratively", "allowing", "for", "intermediate", "results", "to", "be", "displayed", "as", "they", "are", "produced", "by", "streaming", "these", "intermediate", "outputs", "langchain", "enables", "smoother", "ux", "in", "llm", "powered", "apps", "and", "offers", "built", "in", "support", "for", "streaming", "at", "the", "core", "of", "its", "design", "in", "this", "guide", "we", "ll", "discuss", "streaming", "in", "llm", "applications", "and", "explore", "how", "langchain", "s", "streaming", "apis", "facilitate", "real", "time", "output", "from", "various", "components", "in", "your", "application", "what", "to", "stream", "in", "llm", "applications", "in", "applications", "involving", "llms", "several", "types", "of", "data", "can", "be", "streamed", "to", "improve", "user", "experience", "by", "reducing", "perceived", "latency", "and", "increasing", "transparency", "these", "include", "1", "streaming", "llm", "outputs", "the", "most", "common", "and", "critical", "data", "to", "stream", "is", "the", "output", "generated", "by", "the", "llm", "itself", "llms", "often", "take", "time", "to", "generate", "full", "responses", "and", "by", "streaming", "the", "output", "in", "real", "time", "users", "can", "see", "partial", "results", "as", "they", "are", "produced", "this", "provides", "immediate", "feedback", "and", "helps", "reduce", "the", "wait", "time", "for", "users", "2", "streaming", "pipeline", "or", "workflow", "progress", "beyond", "just", "streaming", "llm", "output", "it", "s", "useful", "to", "stream", "progress", "through", "more", "complex", "workflows", "or", "pipelines", "giving", "users", "a", "sense", "of", "how", "the", "application", "is", "progressing", "overall", "this", "could", "include", "in", "langgraph", "workflows", "with", "langgraph", "workflows", "are", "composed", "of", "nodes", "and", "edges", "that", "represent", "various", "steps", "streaming", "here", "involves", "tracking", "changes", "to", "the", "graph", "state", "as", "individual", "nodes", "request", "updates", "this", "allows", "for", "more", "granular", "monitoring", "of", "which", "node", "in", "the", "workflow", "is", "currently", "active", "giving", "real", "time", "updates", "about", "the", "status", "of", "the", "workflow", "as", "it", "progresses", "through", "different", "stages", "in", "lcel", "pipelines", "streaming", "updates", "from", "an", "lcel", "pipeline", "involves", "capturing", "progress", "from", "individual", "sub", "runnables", "for", "example", "as", "different", "steps", "or", "components", "of", "the", "pipeline", "execute", "you", "can", "stream", "which", "sub", "runnable", "is", "currently", "running", "providing", "real", "time", "insight", "into", "the", "overall", "pipeline", "s", "progress", "streaming", "pipeline", "or", "workflow", "progress", "is", "essential", "in", "providing", "users", "with", "a", "clear", "picture", "of", "where", "the", "application", "is", "in", "the", "execution", "process", "3", "streaming", "custom", "data", "in", "some", "cases", "you", "may", "need", "to", "stream", "custom", "data", "that", "goes", "beyond", "the", "information", "provided", "by", "the", "pipeline", "or", "workflow", "structure", "this", "custom", "information", "is", "injected", "within", "a", "specific", "step", "in", "the", "workflow", "whether", "that", "step", "is", "a", "tool", "or", "a", "langgraph", "node", "for", "example", "you", "could", "stream", "updates", "about", "what", "a", "tool", "is", "doing", "in", "real", "time", "or", "the", "progress", "through", "a", "langgraph", "node", "this", "granular", "data", "which", "is", "emitted", "directly", "from", "within", "the", "step", "provides", "more", "detailed", "insights", "into", "the", "execution", "of", "the", "workflow", "and", "is", "especially", "useful", "in", "complex", "processes", "where", "more", "visibility", "is", "needed", "streaming", "apis", "langchain", "has", "two", "main", "apis", "for", "streaming", "output", "in", "real", "time", "these", "apis", "are", "supported", "by", "any", "component", "that", "implements", "the", "runnable", "interface", "including", "llms", "compiled", "langgraph", "graphs", "and", "any", "runnable", "generated", "with", "lcel", "sync", "stream", "and", "async", "astream", "use", "to", "stream", "outputs", "from", "individual", "runnables", "e", "g", "a", "chat", "model", "as", "they", "are", "generated", "or", "stream", "any", "workflow", "created", "with", "langgraph", "the", "async", "only", "astream_events", "use", "this", "api", "to", "get", "access", "to", "custom", "events", "and", "intermediate", "outputs", "from", "llm", "applications", "built", "entirely", "with", "lcel", "note", "that", "this", "api", "is", "available", "but", "not", "needed", "when", "working", "with", "langgraph", "in", "addition", "there", "is", "a", "legacy", "async", "astream_log", "api", "this", "api", "is", "not", "recommended", "for", "new", "projects", "it", "is", "more", "complex", "and", "less", "feature", "rich", "than", "the", "other", "streaming", "apis", "stream", "and", "astream", "the", "stream", "method", "returns", "an", "iterator", "that", "yields", "chunks", "of", "output", "synchronously", "as", "they", "are", "produced", "you", "can", "use", "a", "for", "loop", "to", "process", "each", "chunk", "in", "real", "time", "for", "example", "when", "using", "an", "llm", "this", "allows", "the", "output", "to", "be", "streamed", "incrementally", "as", "it", "is", "generated", "reducing", "the", "wait", "time", "for", "users", "the", "type", "of", "chunk", "yielded", "by", "the", "stream", "and", "astream", "methods", "depends", "on", "the", "component", "being", "streamed", "for", "example", "when", "streaming", "from", "an", "llm", "each", "component", "will", "be", "an", "aimessagechunk", "however", "for", "other", "components", "the", "chunk", "may", "be", "different", "the", "stream", "method", "returns", "an", "iterator", "that", "yields", "these", "chunks", "as", "they", "are", "produced", "for", "example", "for", "chunk", "in", "component", "stream", "some_input", "important", "keep", "the", "processing", "of", "each", "chunk", "as", "efficient", "as", "possible", "while", "you", "re", "processing", "the", "current", "chunk", "the", "upstream", "component", "is", "waiting", "to", "produce", "the", "next", "one", "for", "example", "if", "working", "with", "langgraph", "graph", "execution", "is", "paused", "while", "the", "current", "chunk", "is", "being", "processed", "in", "extreme", "cases", "this", "could", "even", "result", "in", "timeouts", "e", "g", "when", "llm", "outputs", "are", "streamed", "from", "an", "api", "that", "has", "a", "timeout", "print", "chunk", "the", "asynchronous", "version", "astream", "works", "similarly", "but", "is", "designed", "for", "non", "blocking", "workflows", "you", "can", "use", "it", "in", "asynchronous", "code", "to", "achieve", "the", "same", "real", "time", "streaming", "behavior", "usage", "with", "chat", "models", "when", "using", "stream", "or", "astream", "with", "chat", "models", "the", "output", "is", "streamed", "as", "aimessagechunks", "as", "it", "is", "generated", "by", "the", "llm", "this", "allows", "you", "to", "present", "or", "process", "the", "llm", "s", "output", "incrementally", "as", "it", "s", "being", "produced", "which", "is", "particularly", "useful", "in", "interactive", "applications", "or", "interfaces", "usage", "with", "langgraph", "langgraph", "compiled", "graphs", "are", "runnables", "and", "support", "the", "standard", "streaming", "apis", "when", "using", "the", "stream", "and", "astream", "methods", "with", "langgraph", "you", "can", "choose", "one", "or", "more", "streaming", "mode", "which", "allow", "you", "to", "control", "the", "type", "of", "output", "that", "is", "streamed", "the", "available", "streaming", "modes", "are", "values", "emit", "all", "values", "of", "the", "state", "for", "each", "step", "updates", "emit", "only", "the", "node", "name", "s", "and", "updates", "that", "were", "returned", "by", "the", "node", "s", "after", "each", "step", "debug", "emit", "debug", "events", "for", "each", "step", "messages", "emit", "llm", "messages", "token", "by", "token", "custom", "emit", "custom", "output", "written", "using", "langgraph", "s", "streamwriter", "for", "more", "information", "please", "see", "langgraph", "streaming", "conceptual", "guide", "for", "more", "information", "on", "how", "to", "stream", "when", "working", "with", "langgraph", "langgraph", "streaming", "how", "to", "guides", "for", "specific", "examples", "of", "streaming", "in", "langgraph", "usage", "with", "lcel", "if", "you", "compose", "multiple", "runnables", "using", "langchain", "s", "expression", "language", "lcel", "the", "stream", "and", "astream", "methods", "will", "by", "convention", "stream", "the", "output", "of", "the", "last", "step", "in", "the", "chain", "this", "allows", "the", "final", "processed", "result", "to", "be", "streamed", "incrementally", "lcel", "tries", "to", "optimize", "streaming", "latency", "in", "pipelines", "so", "that", "the", "streaming", "results", "from", "the", "last", "step", "are", "available", "as", "soon", "as", "possible", "astream_events", "use", "the", "astream_events", "api", "to", "access", "custom", "data", "and", "intermediate", "outputs", "from", "llm", "applications", "built", "entirely", "with", "lcel", "while", "this", "api", "is", "available", "for", "use", "with", "langgraph", "as", "well", "it", "is", "usually", "not", "necessary", "when", "working", "with", "langgraph", "as", "the", "stream", "and", "astream", "methods", "provide", "comprehensive", "streaming", "capabilities", "for", "langgraph", "graphs", "for", "chains", "constructed", "using", "lcel", "the", "stream", "method", "only", "streams", "the", "output", "of", "the", "final", "step", "from", "the", "chain", "this", "might", "be", "sufficient", "for", "some", "applications", "but", "as", "you", "build", "more", "complex", "chains", "of", "several", "llm", "calls", "together", "you", "may", "want", "to", "use", "the", "intermediate", "values", "of", "the", "chain", "alongside", "the", "final", "output", "for", "example", "you", "may", "want", "to", "return", "sources", "alongside", "the", "final", "generation", "when", "building", "a", "chat", "over", "documents", "app", "there", "are", "ways", "to", "do", "this", "using", "callbacks", "or", "by", "constructing", "your", "chain", "in", "such", "a", "way", "that", "it", "passes", "intermediate", "values", "to", "the", "end", "with", "something", "like", "chained", "assign", "calls", "but", "langchain", "also", "includes", "an", "astream_events", "method", "that", "combines", "the", "flexibility", "of", "callbacks", "with", "the", "ergonomics", "of", "stream", "when", "called", "it", "returns", "an", "iterator", "which", "yields", "various", "types", "of", "events", "that", "you", "can", "filter", "and", "process", "according", "to", "the", "needs", "of", "your", "project", "here", "s", "one", "small", "example", "that", "prints", "just", "events", "containing", "streamed", "chat", "model", "output", "from", "langchain_core", "output_parsers", "import", "stroutputparser", "from", "langchain_core", "prompts", "import", "chatprompttemplate", "from", "langchain_anthropic", "import", "chatanthropic", "model", "chatanthropic", "model", "claude", "3", "7", "sonnet", "20250219", "prompt", "chatprompttemplate", "from_template", "tell", "me", "a", "joke", "about", "topic", "parser", "stroutputparser", "chain", "prompt", "model", "parser", "async", "for", "event", "in", "chain", "astream_events", "topic", "parrot", "kind", "event", "event", "if", "kind", "on_chat_model_stream", "print", "event", "end", "flush", "true", "api", "reference", "stroutputparser", "chatprompttemplate", "you", "can", "roughly", "think", "of", "it", "as", "an", "iterator", "over", "callback", "events", "though", "the", "format", "differs", "and", "you", "can", "use", "it", "on", "almost", "all", "langchain", "components", "see", "this", "guide", "for", "more", "detailed", "information", "on", "how", "to", "use", "astream_events", "including", "a", "table", "listing", "available", "events", "writing", "custom", "data", "to", "the", "stream", "to", "write", "custom", "data", "to", "the", "stream", "you", "will", "need", "to", "choose", "one", "of", "the", "following", "methods", "based", "on", "the", "component", "you", "are", "working", "with", "langgraph", "s", "streamwriter", "can", "be", "used", "to", "write", "custom", "data", "that", "will", "surface", "through", "stream", "and", "astream", "apis", "when", "working", "with", "langgraph", "important", "this", "is", "a", "langgraph", "feature", "so", "it", "is", "not", "available", "when", "working", "with", "pure", "lcel", "see", "how", "to", "streaming", "custom", "data", "for", "more", "information", "dispatch_events", "adispatch_events", "can", "be", "used", "to", "write", "custom", "data", "that", "will", "be", "surfaced", "through", "the", "astream_events", "api", "see", "how", "to", "dispatch", "custom", "callback", "events", "for", "more", "information", "auto", "streaming", "chat", "models", "langchain", "simplifies", "streaming", "from", "chat", "models", "by", "automatically", "enabling", "streaming", "mode", "in", "certain", "cases", "even", "when", "you", "re", "not", "explicitly", "calling", "the", "streaming", "methods", "this", "is", "particularly", "useful", "when", "you", "use", "the", "non", "streaming", "invoke", "method", "but", "still", "want", "to", "stream", "the", "entire", "application", "including", "intermediate", "results", "from", "the", "chat", "model", "how", "it", "works", "when", "you", "call", "the", "invoke", "or", "ainvoke", "method", "on", "a", "chat", "model", "langchain", "will", "automatically", "switch", "to", "streaming", "mode", "if", "it", "detects", "that", "you", "are", "trying", "to", "stream", "the", "overall", "application", "under", "the", "hood", "it", "ll", "have", "invoke", "or", "ainvoke", "use", "the", "stream", "or", "astream", "method", "to", "generate", "its", "output", "the", "result", "of", "the", "invocation", "will", "be", "the", "same", "as", "far", "as", "the", "code", "that", "was", "using", "invoke", "is", "concerned", "however", "while", "the", "chat", "model", "is", "being", "streamed", "langchain", "will", "take", "care", "of", "invoking", "on_llm_new_token", "events", "in", "langchain", "s", "callback", "system", "these", "callback", "events", "allow", "langgraph", "stream", "astream", "and", "astream_events", "to", "surface", "the", "chat", "model", "s", "output", "in", "real", "time", "example", "def", "node", "state", "the", "code", "below", "uses", "the", "invoke", "method", "but", "langchain", "will", "automatically", "switch", "to", "streaming", "mode", "when", "it", "detects", "that", "the", "overall", "application", "is", "being", "streamed", "ai_message", "model", "invoke", "state", "messages", "for", "chunk", "in", "compiled_graph", "stream", "mode", "messages", "async", "programming", "langchain", "offers", "both", "synchronous", "sync", "and", "asynchronous", "async", "versions", "of", "many", "of", "its", "methods", "the", "async", "methods", "are", "typically", "prefixed", "with", "an", "a", "e", "g", "ainvoke", "astream", "when", "writing", "async", "code", "it", "s", "crucial", "to", "consistently", "use", "these", "asynchronous", "methods", "to", "ensure", "non", "blocking", "behavior", "and", "optimal", "performance", "if", "streaming", "data", "fails", "to", "appear", "in", "real", "time", "please", "ensure", "that", "you", "are", "using", "the", "correct", "async", "methods", "for", "your", "workflow", "please", "review", "the", "async", "programming", "in", "langchain", "guide", "for", "more", "information", "on", "writing", "async", "code", "with", "langchain", "related", "resources", "please", "see", "the", "following", "how", "to", "guides", "for", "specific", "examples", "of", "streaming", "in", "langchain", "langgraph", "conceptual", "guide", "on", "streaming", "langgraph", "streaming", "how", "to", "guides", "how", "to", "stream", "runnables", "this", "how", "to", "guide", "goes", "over", "common", "streaming", "patterns", "with", "langchain", "components", "e", "g", "chat", "models", "and", "with", "lcel", "how", "to", "stream", "chat", "models", "how", "to", "stream", "tool", "calls", "for", "writing", "custom", "data", "to", "the", "stream", "please", "see", "the", "following", "resources", "if", "using", "langgraph", "see", "how", "to", "stream", "custom", "data", "if", "using", "lcel", "see", "how", "to", "dispatch", "custom", "callback", "events"], ["title", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "slug", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "tags", "source", "why_for_designers", "todo", "bot_application", "todo", "collaboration_prompts", "what", "retrieval", "strategy", "applies", "here", "sources", "url", "https", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "title", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "author", "license", "internal", "copy", "retrieved_at", "2025", "08", "17", "policy", "quote", "figures", "path", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "e7b97fc35541", "webp", "caption", "the", "augmented", "llm", "credit_name", "www", "anthropic", "com", "credit_url", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2fd3083d3f40bb2b6f477901cc9a240738d3dd1371", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "path", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "190994fc386e", "webp", "caption", "the", "prompt", "chaining", "workflow", "credit_name", "www", "anthropic", "com", "credit_url", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f7418719e3dab222dccb379b8879e1dc08ad34c78", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "path", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "a74d404aaa37", "webp", "caption", "the", "routing", "workflow", "credit_name", "www", "anthropic", "com", "credit_url", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f5c0c0e9fe4def0b584c04d37849941da55e5e71c", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "path", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "b7e384eb5411", "webp", "caption", "the", "parallelization", "workflow", "credit_name", "www", "anthropic", "com", "credit_url", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f406bb032ca007fd1624f261af717d70e6ca86286", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "path", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "1d85998e6a68", "webp", "caption", "the", "orchestrator", "workers", "workflow", "credit_name", "www", "anthropic", "com", "credit_url", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f8985fc683fae4780fb34eab1365ab78c7e51bc8e", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "path", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "9c9873b4e0a9", "webp", "caption", "the", "evaluator", "optimizer", "workflow", "credit_name", "www", "anthropic", "com", "credit_url", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f14f51e6406ccb29e695da48b17017e899a6119c7", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "path", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "aed8cefcfb11", "webp", "caption", "autonomous", "agent", "credit_name", "www", "anthropic", "com", "credit_url", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f58d9f10c985c4eb5d53798dea315f7bb5ab6249e", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "path", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "2f82b99cf57a", "webp", "caption", "high", "level", "flow", "of", "a", "coding", "agent", "credit_name", "www", "anthropic", "com", "credit_url", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f4b9a1f4eb63d5962a6e1746ac26bbc857cf3474f", "2400x1666", "png", "w", "3840", "q", "75", "license", "internal", "copy", "updated_at", "2025", "08", "17", "completed", "false", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "synthesis", "todo", "over", "the", "past", "year", "we", "ve", "worked", "with", "dozens", "of", "teams", "building", "large", "language", "model", "llm", "agents", "across", "industries", "consistently", "the", "most", "successful", "implementations", "weren", "t", "using", "complex", "frameworks", "or", "specialized", "libraries", "instead", "they", "were", "building", "with", "simple", "composable", "patterns", "in", "this", "post", "we", "share", "what", "we", "ve", "learned", "from", "working", "with", "our", "customers", "and", "building", "agents", "ourselves", "and", "give", "practical", "advice", "for", "developers", "on", "building", "effective", "agents", "what", "are", "agents", "agent", "can", "be", "defined", "in", "several", "ways", "some", "customers", "define", "agents", "as", "fully", "autonomous", "systems", "that", "operate", "independently", "over", "extended", "periods", "using", "various", "tools", "to", "accomplish", "complex", "tasks", "others", "use", "the", "term", "to", "describe", "more", "prescriptive", "implementations", "that", "follow", "predefined", "workflows", "at", "anthropic", "we", "categorize", "all", "these", "variations", "as", "agentic", "systems", "but", "draw", "an", "important", "architectural", "distinction", "between", "workflows", "and", "agents", "workflows", "are", "systems", "where", "llms", "and", "tools", "are", "orchestrated", "through", "predefined", "code", "paths", "agents", "on", "the", "other", "hand", "are", "systems", "where", "llms", "dynamically", "direct", "their", "own", "processes", "and", "tool", "usage", "maintaining", "control", "over", "how", "they", "accomplish", "tasks", "below", "we", "will", "explore", "both", "types", "of", "agentic", "systems", "in", "detail", "in", "appendix", "1", "agents", "in", "practice", "we", "describe", "two", "domains", "where", "customers", "have", "found", "particular", "value", "in", "using", "these", "kinds", "of", "systems", "when", "and", "when", "not", "to", "use", "agents", "when", "building", "applications", "with", "llms", "we", "recommend", "finding", "the", "simplest", "solution", "possible", "and", "only", "increasing", "complexity", "when", "needed", "this", "might", "mean", "not", "building", "agentic", "systems", "at", "all", "agentic", "systems", "often", "trade", "latency", "and", "cost", "for", "better", "task", "performance", "and", "you", "should", "consider", "when", "this", "tradeoff", "makes", "sense", "when", "more", "complexity", "is", "warranted", "workflows", "offer", "predictability", "and", "consistency", "for", "well", "defined", "tasks", "whereas", "agents", "are", "the", "better", "option", "when", "flexibility", "and", "model", "driven", "decision", "making", "are", "needed", "at", "scale", "for", "many", "applications", "however", "optimizing", "single", "llm", "calls", "with", "retrieval", "and", "in", "context", "examples", "is", "usually", "enough", "when", "and", "how", "to", "use", "frameworks", "there", "are", "many", "frameworks", "that", "make", "agentic", "systems", "easier", "to", "implement", "including", "langgraph", "from", "langchain", "amazon", "bedrock", "s", "ai", "agent", "framework", "rivet", "a", "drag", "and", "drop", "gui", "llm", "workflow", "builder", "and", "vellum", "another", "gui", "tool", "for", "building", "and", "testing", "complex", "workflows", "these", "frameworks", "make", "it", "easy", "to", "get", "started", "by", "simplifying", "standard", "low", "level", "tasks", "like", "calling", "llms", "defining", "and", "parsing", "tools", "and", "chaining", "calls", "together", "however", "they", "often", "create", "extra", "layers", "of", "abstraction", "that", "can", "obscure", "the", "underlying", "prompts", "and", "responses", "making", "them", "harder", "to", "debug", "they", "can", "also", "make", "it", "tempting", "to", "add", "complexity", "when", "a", "simpler", "setup", "would", "suffice", "we", "suggest", "that", "developers", "start", "by", "using", "llm", "apis", "directly", "many", "patterns", "can", "be", "implemented", "in", "a", "few", "lines", "of", "code", "if", "you", "do", "use", "a", "framework", "ensure", "you", "understand", "the", "underlying", "code", "incorrect", "assumptions", "about", "what", "s", "under", "the", "hood", "are", "a", "common", "source", "of", "customer", "error", "see", "our", "cookbook", "for", "some", "sample", "implementations", "building", "blocks", "workflows", "and", "agents", "in", "this", "section", "we", "ll", "explore", "the", "common", "patterns", "for", "agentic", "systems", "we", "ve", "seen", "in", "production", "we", "ll", "start", "with", "our", "foundational", "building", "block", "the", "augmented", "llm", "and", "progressively", "increase", "complexity", "from", "simple", "compositional", "workflows", "to", "autonomous", "agents", "building", "block", "the", "augmented", "llm", "the", "basic", "building", "block", "of", "agentic", "systems", "is", "an", "llm", "enhanced", "with", "augmentations", "such", "as", "retrieval", "tools", "and", "memory", "our", "current", "models", "can", "actively", "use", "these", "capabilities", "generating", "their", "own", "search", "queries", "selecting", "appropriate", "tools", "and", "determining", "what", "information", "to", "retain", "we", "recommend", "focusing", "on", "two", "key", "aspects", "of", "the", "implementation", "tailoring", "these", "capabilities", "to", "your", "specific", "use", "case", "and", "ensuring", "they", "provide", "an", "easy", "well", "documented", "interface", "for", "your", "llm", "while", "there", "are", "many", "ways", "to", "implement", "these", "augmentations", "one", "approach", "is", "through", "our", "recently", "released", "model", "context", "protocol", "which", "allows", "developers", "to", "integrate", "with", "a", "growing", "ecosystem", "of", "third", "party", "tools", "with", "a", "simple", "client", "implementation", "for", "the", "remainder", "of", "this", "post", "we", "ll", "assume", "each", "llm", "call", "has", "access", "to", "these", "augmented", "capabilities", "workflow", "prompt", "chaining", "prompt", "chaining", "decomposes", "a", "task", "into", "a", "sequence", "of", "steps", "where", "each", "llm", "call", "processes", "the", "output", "of", "the", "previous", "one", "you", "can", "add", "programmatic", "checks", "see", "gate", "in", "the", "diagram", "below", "on", "any", "intermediate", "steps", "to", "ensure", "that", "the", "process", "is", "still", "on", "track", "when", "to", "use", "this", "workflow", "this", "workflow", "is", "ideal", "for", "situations", "where", "the", "task", "can", "be", "easily", "and", "cleanly", "decomposed", "into", "fixed", "subtasks", "the", "main", "goal", "is", "to", "trade", "off", "latency", "for", "higher", "accuracy", "by", "making", "each", "llm", "call", "an", "easier", "task", "examples", "where", "prompt", "chaining", "is", "useful", "generating", "marketing", "copy", "then", "translating", "it", "into", "a", "different", "language", "writing", "an", "outline", "of", "a", "document", "checking", "that", "the", "outline", "meets", "certain", "criteria", "then", "writing", "the", "document", "based", "on", "the", "outline", "workflow", "routing", "routing", "classifies", "an", "input", "and", "directs", "it", "to", "a", "specialized", "followup", "task", "this", "workflow", "allows", "for", "separation", "of", "concerns", "and", "building", "more", "specialized", "prompts", "without", "this", "workflow", "optimizing", "for", "one", "kind", "of", "input", "can", "hurt", "performance", "on", "other", "inputs", "when", "to", "use", "this", "workflow", "routing", "works", "well", "for", "complex", "tasks", "where", "there", "are", "distinct", "categories", "that", "are", "better", "handled", "separately", "and", "where", "classification", "can", "be", "handled", "accurately", "either", "by", "an", "llm", "or", "a", "more", "traditional", "classification", "model", "algorithm", "examples", "where", "routing", "is", "useful", "directing", "different", "types", "of", "customer", "service", "queries", "general", "questions", "refund", "requests", "technical", "support", "into", "different", "downstream", "processes", "prompts", "and", "tools", "routing", "easy", "common", "questions", "to", "smaller", "models", "like", "claude", "3", "5", "haiku", "and", "hard", "unusual", "questions", "to", "more", "capable", "models", "like", "claude", "3", "5", "sonnet", "to", "optimize", "cost", "and", "speed", "workflow", "parallelization", "llms", "can", "sometimes", "work", "simultaneously", "on", "a", "task", "and", "have", "their", "outputs", "aggregated", "programmatically", "this", "workflow", "parallelization", "manifests", "in", "two", "key", "variations", "sectioning", "breaking", "a", "task", "into", "independent", "subtasks", "run", "in", "parallel", "voting", "running", "the", "same", "task", "multiple", "times", "to", "get", "diverse", "outputs", "when", "to", "use", "this", "workflow", "parallelization", "is", "effective", "when", "the", "divided", "subtasks", "can", "be", "parallelized", "for", "speed", "or", "when", "multiple", "perspectives", "or", "attempts", "are", "needed", "for", "higher", "confidence", "results", "for", "complex", "tasks", "with", "multiple", "considerations", "llms", "generally", "perform", "better", "when", "each", "consideration", "is", "handled", "by", "a", "separate", "llm", "call", "allowing", "focused", "attention", "on", "each", "specific", "aspect", "examples", "where", "parallelization", "is", "useful", "sectioning", "implementing", "guardrails", "where", "one", "model", "instance", "processes", "user", "queries", "while", "another", "screens", "them", "for", "inappropriate", "content", "or", "requests", "this", "tends", "to", "perform", "better", "than", "having", "the", "same", "llm", "call", "handle", "both", "guardrails", "and", "the", "core", "response", "automating", "evals", "for", "evaluating", "llm", "performance", "where", "each", "llm", "call", "evaluates", "a", "different", "aspect", "of", "the", "model", "s", "performance", "on", "a", "given", "prompt", "voting", "reviewing", "a", "piece", "of", "code", "for", "vulnerabilities", "where", "several", "different", "prompts", "review", "and", "flag", "the", "code", "if", "they", "find", "a", "problem", "evaluating", "whether", "a", "given", "piece", "of", "content", "is", "inappropriate", "with", "multiple", "prompts", "evaluating", "different", "aspects", "or", "requiring", "different", "vote", "thresholds", "to", "balance", "false", "positives", "and", "negatives", "workflow", "orchestrator", "workers", "in", "the", "orchestrator", "workers", "workflow", "a", "central", "llm", "dynamically", "breaks", "down", "tasks", "delegates", "them", "to", "worker", "llms", "and", "synthesizes", "their", "results", "when", "to", "use", "this", "workflow", "this", "workflow", "is", "well", "suited", "for", "complex", "tasks", "where", "you", "can", "t", "predict", "the", "subtasks", "needed", "in", "coding", "for", "example", "the", "number", "of", "files", "that", "need", "to", "be", "changed", "and", "the", "nature", "of", "the", "change", "in", "each", "file", "likely", "depend", "on", "the", "task", "whereas", "it", "s", "topographically", "similar", "the", "key", "difference", "from", "parallelization", "is", "its", "flexibility", "subtasks", "aren", "t", "pre", "defined", "but", "determined", "by", "the", "orchestrator", "based", "on", "the", "specific", "input", "example", "where", "orchestrator", "workers", "is", "useful", "coding", "products", "that", "make", "complex", "changes", "to", "multiple", "files", "each", "time", "search", "tasks", "that", "involve", "gathering", "and", "analyzing", "information", "from", "multiple", "sources", "for", "possible", "relevant", "information", "workflow", "evaluator", "optimizer", "in", "the", "evaluator", "optimizer", "workflow", "one", "llm", "call", "generates", "a", "response", "while", "another", "provides", "evaluation", "and", "feedback", "in", "a", "loop", "when", "to", "use", "this", "workflow", "this", "workflow", "is", "particularly", "effective", "when", "we", "have", "clear", "evaluation", "criteria", "and", "when", "iterative", "refinement", "provides", "measurable", "value", "the", "two", "signs", "of", "good", "fit", "are", "first", "that", "llm", "responses", "can", "be", "demonstrably", "improved", "when", "a", "human", "articulates", "their", "feedback", "and", "second", "that", "the", "llm", "can", "provide", "such", "feedback", "this", "is", "analogous", "to", "the", "iterative", "writing", "process", "a", "human", "writer", "might", "go", "through", "when", "producing", "a", "polished", "document", "examples", "where", "evaluator", "optimizer", "is", "useful", "literary", "translation", "where", "there", "are", "nuances", "that", "the", "translator", "llm", "might", "not", "capture", "initially", "but", "where", "an", "evaluator", "llm", "can", "provide", "useful", "critiques", "complex", "search", "tasks", "that", "require", "multiple", "rounds", "of", "searching", "and", "analysis", "to", "gather", "comprehensive", "information", "where", "the", "evaluator", "decides", "whether", "further", "searches", "are", "warranted", "agents", "agents", "are", "emerging", "in", "production", "as", "llms", "mature", "in", "key", "capabilities", "understanding", "complex", "inputs", "engaging", "in", "reasoning", "and", "planning", "using", "tools", "reliably", "and", "recovering", "from", "errors", "agents", "begin", "their", "work", "with", "either", "a", "command", "from", "or", "interactive", "discussion", "with", "the", "human", "user", "once", "the", "task", "is", "clear", "agents", "plan", "and", "operate", "independently", "potentially", "returning", "to", "the", "human", "for", "further", "information", "or", "judgement", "during", "execution", "it", "s", "crucial", "for", "the", "agents", "to", "gain", "ground", "truth", "from", "the", "environment", "at", "each", "step", "such", "as", "tool", "call", "results", "or", "code", "execution", "to", "assess", "its", "progress", "agents", "can", "then", "pause", "for", "human", "feedback", "at", "checkpoints", "or", "when", "encountering", "blockers", "the", "task", "often", "terminates", "upon", "completion", "but", "it", "s", "also", "common", "to", "include", "stopping", "conditions", "such", "as", "a", "maximum", "number", "of", "iterations", "to", "maintain", "control", "agents", "can", "handle", "sophisticated", "tasks", "but", "their", "implementation", "is", "often", "straightforward", "they", "are", "typically", "just", "llms", "using", "tools", "based", "on", "environmental", "feedback", "in", "a", "loop", "it", "is", "therefore", "crucial", "to", "design", "toolsets", "and", "their", "documentation", "clearly", "and", "thoughtfully", "we", "expand", "on", "best", "practices", "for", "tool", "development", "in", "appendix", "2", "prompt", "engineering", "your", "tools", "when", "to", "use", "agents", "agents", "can", "be", "used", "for", "open", "ended", "problems", "where", "it", "s", "difficult", "or", "impossible", "to", "predict", "the", "required", "number", "of", "steps", "and", "where", "you", "can", "t", "hardcode", "a", "fixed", "path", "the", "llm", "will", "potentially", "operate", "for", "many", "turns", "and", "you", "must", "have", "some", "level", "of", "trust", "in", "its", "decision", "making", "agents", "autonomy", "makes", "them", "ideal", "for", "scaling", "tasks", "in", "trusted", "environments", "the", "autonomous", "nature", "of", "agents", "means", "higher", "costs", "and", "the", "potential", "for", "compounding", "errors", "we", "recommend", "extensive", "testing", "in", "sandboxed", "environments", "along", "with", "the", "appropriate", "guardrails", "examples", "where", "agents", "are", "useful", "the", "following", "examples", "are", "from", "our", "own", "implementations", "a", "coding", "agent", "to", "resolve", "swe", "bench", "tasks", "which", "involve", "edits", "to", "many", "files", "based", "on", "a", "task", "description", "our", "computer", "use", "reference", "implementation", "where", "claude", "uses", "a", "computer", "to", "accomplish", "tasks", "combining", "and", "customizing", "these", "patterns", "these", "building", "blocks", "aren", "t", "prescriptive", "they", "re", "common", "patterns", "that", "developers", "can", "shape", "and", "combine", "to", "fit", "different", "use", "cases", "the", "key", "to", "success", "as", "with", "any", "llm", "features", "is", "measuring", "performance", "and", "iterating", "on", "implementations", "to", "repeat", "you", "should", "consider", "adding", "complexity", "only", "when", "it", "demonstrably", "improves", "outcomes", "summary", "success", "in", "the", "llm", "space", "isn", "t", "about", "building", "the", "most", "sophisticated", "system", "it", "s", "about", "building", "the", "right", "system", "for", "your", "needs", "start", "with", "simple", "prompts", "optimize", "them", "with", "comprehensive", "evaluation", "and", "add", "multi", "step", "agentic", "systems", "only", "when", "simpler", "solutions", "fall", "short", "when", "implementing", "agents", "we", "try", "to", "follow", "three", "core", "principles", "maintain", "simplicity", "in", "your", "agent", "s", "design", "prioritize", "transparency", "by", "explicitly", "showing", "the", "agent", "s", "planning", "steps", "carefully", "craft", "your", "agent", "computer", "interface", "aci", "through", "thorough", "tool", "documentation", "and", "testing", "frameworks", "can", "help", "you", "get", "started", "quickly", "but", "don", "t", "hesitate", "to", "reduce", "abstraction", "layers", "and", "build", "with", "basic", "components", "as", "you", "move", "to", "production", "by", "following", "these", "principles", "you", "can", "create", "agents", "that", "are", "not", "only", "powerful", "but", "also", "reliable", "maintainable", "and", "trusted", "by", "their", "users", "acknowledgements", "written", "by", "erik", "schluntz", "and", "barry", "zhang", "this", "work", "draws", "upon", "our", "experiences", "building", "agents", "at", "anthropic", "and", "the", "valuable", "insights", "shared", "by", "our", "customers", "for", "which", "we", "re", "deeply", "grateful", "appendix", "1", "agents", "in", "practice", "our", "work", "with", "customers", "has", "revealed", "two", "particularly", "promising", "applications", "for", "ai", "agents", "that", "demonstrate", "the", "practical", "value", "of", "the", "patterns", "discussed", "above", "both", "applications", "illustrate", "how", "agents", "add", "the", "most", "value", "for", "tasks", "that", "require", "both", "conversation", "and", "action", "have", "clear", "success", "criteria", "enable", "feedback", "loops", "and", "integrate", "meaningful", "human", "oversight", "a", "customer", "support", "customer", "support", "combines", "familiar", "chatbot", "interfaces", "with", "enhanced", "capabilities", "through", "tool", "integration", "this", "is", "a", "natural", "fit", "for", "more", "open", "ended", "agents", "because", "support", "interactions", "naturally", "follow", "a", "conversation", "flow", "while", "requiring", "access", "to", "external", "information", "and", "actions", "tools", "can", "be", "integrated", "to", "pull", "customer", "data", "order", "history", "and", "knowledge", "base", "articles", "actions", "such", "as", "issuing", "refunds", "or", "updating", "tickets", "can", "be", "handled", "programmatically", "and", "success", "can", "be", "clearly", "measured", "through", "user", "defined", "resolutions", "several", "companies", "have", "demonstrated", "the", "viability", "of", "this", "approach", "through", "usage", "based", "pricing", "models", "that", "charge", "only", "for", "successful", "resolutions", "showing", "confidence", "in", "their", "agents", "effectiveness", "b", "coding", "agents", "the", "software", "development", "space", "has", "shown", "remarkable", "potential", "for", "llm", "features", "with", "capabilities", "evolving", "from", "code", "completion", "to", "autonomous", "problem", "solving", "agents", "are", "particularly", "effective", "because", "code", "solutions", "are", "verifiable", "through", "automated", "tests", "agents", "can", "iterate", "on", "solutions", "using", "test", "results", "as", "feedback", "the", "problem", "space", "is", "well", "defined", "and", "structured", "and", "output", "quality", "can", "be", "measured", "objectively", "in", "our", "own", "implementation", "agents", "can", "now", "solve", "real", "github", "issues", "in", "the", "swe", "bench", "verified", "benchmark", "based", "on", "the", "pull", "request", "description", "alone", "however", "whereas", "automated", "testing", "helps", "verify", "functionality", "human", "review", "remains", "crucial", "for", "ensuring", "solutions", "align", "with", "broader", "system", "requirements", "appendix", "2", "prompt", "engineering", "your", "tools", "no", "matter", "which", "agentic", "system", "you", "re", "building", "tools", "will", "likely", "be", "an", "important", "part", "of", "your", "agent", "tools", "enable", "claude", "to", "interact", "with", "external", "services", "and", "apis", "by", "specifying", "their", "exact", "structure", "and", "definition", "in", "our", "api", "when", "claude", "responds", "it", "will", "include", "a", "tool", "use", "block", "in", "the", "api", "response", "if", "it", "plans", "to", "invoke", "a", "tool", "tool", "definitions", "and", "specifications", "should", "be", "given", "just", "as", "much", "prompt", "engineering", "attention", "as", "your", "overall", "prompts", "in", "this", "brief", "appendix", "we", "describe", "how", "to", "prompt", "engineer", "your", "tools", "there", "are", "often", "several", "ways", "to", "specify", "the", "same", "action", "for", "instance", "you", "can", "specify", "a", "file", "edit", "by", "writing", "a", "diff", "or", "by", "rewriting", "the", "entire", "file", "for", "structured", "output", "you", "can", "return", "code", "inside", "markdown", "or", "inside", "json", "in", "software", "engineering", "differences", "like", "these", "are", "cosmetic", "and", "can", "be", "converted", "losslessly", "from", "one", "to", "the", "other", "however", "some", "formats", "are", "much", "more", "difficult", "for", "an", "llm", "to", "write", "than", "others", "writing", "a", "diff", "requires", "knowing", "how", "many", "lines", "are", "changing", "in", "the", "chunk", "header", "before", "the", "new", "code", "is", "written", "writing", "code", "inside", "json", "compared", "to", "markdown", "requires", "extra", "escaping", "of", "newlines", "and", "quotes", "our", "suggestions", "for", "deciding", "on", "tool", "formats", "are", "the", "following", "give", "the", "model", "enough", "tokens", "to", "think", "before", "it", "writes", "itself", "into", "a", "corner", "keep", "the", "format", "close", "to", "what", "the", "model", "has", "seen", "naturally", "occurring", "in", "text", "on", "the", "internet", "make", "sure", "there", "s", "no", "formatting", "overhead", "such", "as", "having", "to", "keep", "an", "accurate", "count", "of", "thousands", "of", "lines", "of", "code", "or", "string", "escaping", "any", "code", "it", "writes", "one", "rule", "of", "thumb", "is", "to", "think", "about", "how", "much", "effort", "goes", "into", "human", "computer", "interfaces", "hci", "and", "plan", "to", "invest", "just", "as", "much", "effort", "in", "creating", "good", "agent", "computer", "interfaces", "aci", "here", "are", "some", "thoughts", "on", "how", "to", "do", "so", "put", "yourself", "in", "the", "model", "s", "shoes", "is", "it", "obvious", "how", "to", "use", "this", "tool", "based", "on", "the", "description", "and", "parameters", "or", "would", "you", "need", "to", "think", "carefully", "about", "it", "if", "so", "then", "it", "s", "probably", "also", "true", "for", "the", "model", "a", "good", "tool", "definition", "often", "includes", "example", "usage", "edge", "cases", "input", "format", "requirements", "and", "clear", "boundaries", "from", "other", "tools", "how", "can", "you", "change", "parameter", "names", "or", "descriptions", "to", "make", "things", "more", "obvious", "think", "of", "this", "as", "writing", "a", "great", "docstring", "for", "a", "junior", "developer", "on", "your", "team", "this", "is", "especially", "important", "when", "using", "many", "similar", "tools", "test", "how", "the", "model", "uses", "your", "tools", "run", "many", "example", "inputs", "in", "our", "workbench", "to", "see", "what", "mistakes", "the", "model", "makes", "and", "iterate", "poka", "yoke", "your", "tools", "change", "the", "arguments", "so", "that", "it", "is", "harder", "to", "make", "mistakes", "while", "building", "our", "agent", "for", "swe", "bench", "we", "actually", "spent", "more", "time", "optimizing", "our", "tools", "than", "the", "overall", "prompt", "for", "example", "we", "found", "that", "the", "model", "would", "make", "mistakes", "with", "tools", "using", "relative", "filepaths", "after", "the", "agent", "had", "moved", "out", "of", "the", "root", "directory", "to", "fix", "this", "we", "changed", "the", "tool", "to", "always", "require", "absolute", "filepaths", "and", "we", "found", "that", "the", "model", "used", "this", "method", "flawlessly", "the", "augmented", "llm", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "e7b97fc35541", "webp", "figcaption", "figure", "1", "credit", "www", "anthropic", "com", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2fd3083d3f40bb2b6f477901cc9a240738d3dd1371", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "figcaption", "the", "prompt", "chaining", "workflow", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "190994fc386e", "webp", "figcaption", "figure", "2", "credit", "www", "anthropic", "com", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f7418719e3dab222dccb379b8879e1dc08ad34c78", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "figcaption", "the", "routing", "workflow", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "a74d404aaa37", "webp", "figcaption", "figure", "3", "credit", "www", "anthropic", "com", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f5c0c0e9fe4def0b584c04d37849941da55e5e71c", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "figcaption", "the", "parallelization", "workflow", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "b7e384eb5411", "webp", "figcaption", "figure", "4", "credit", "www", "anthropic", "com", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f406bb032ca007fd1624f261af717d70e6ca86286", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "figcaption", "the", "orchestrator", "workers", "workflow", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "1d85998e6a68", "webp", "figcaption", "figure", "5", "credit", "www", "anthropic", "com", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f8985fc683fae4780fb34eab1365ab78c7e51bc8e", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "figcaption", "the", "evaluator", "optimizer", "workflow", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "9c9873b4e0a9", "webp", "figcaption", "figure", "6", "credit", "www", "anthropic", "com", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f14f51e6406ccb29e695da48b17017e899a6119c7", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "figcaption", "autonomous", "agent", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "aed8cefcfb11", "webp", "figcaption", "figure", "7", "credit", "www", "anthropic", "com", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f58d9f10c985c4eb5d53798dea315f7bb5ab6249e", "2401x1000", "png", "w", "3840", "q", "75", "license", "internal", "copy", "figcaption", "high", "level", "flow", "of", "a", "coding", "agent", "assets", "www", "anthropic", "com", "www", "anthropic", "com", "engineering", "building", "effective", "agents", "2f82b99cf57a", "webp", "figcaption", "figure", "8", "credit", "www", "anthropic", "com", "https", "www", "anthropic", "com", "_next", "image", "url", "https", "3a", "2f", "2fwww", "cdn", "anthropic", "com", "2fimages", "2f4zrzovbb", "2fwebsite", "2f4b9a1f4eb63d5962a6e1746ac26bbc857cf3474f", "2400x1666", "png", "w", "3840", "q", "75", "license", "internal", "copy", "figcaption"], ["title", "docs", "crewai", "com", "en", "concepts", "knowledge", "slug", "docs", "crewai", "com", "en", "concepts", "knowledge", "tags", "source", "why_for_designers", "todo", "bot_application", "todo", "collaboration_prompts", "what", "retrieval", "strategy", "applies", "here", "sources", "url", "https", "docs", "crewai", "com", "en", "concepts", "knowledge", "title", "docs", "crewai", "com", "en", "concepts", "knowledge", "author", "license", "internal", "copy", "retrieved_at", "2025", "08", "17", "policy", "copy", "figures", "path", "assets", "docs", "crewai", "com", "docs", "crewai", "com", "en", "concepts", "knowledge", "71bc45159c09", "webp", "caption", "light", "logo", "credit_name", "docs", "crewai", "com", "credit_url", "https", "mintlify", "s3", "us", "west", "1", "amazonaws", "com", "crewai", "images", "crew_only_logo", "png", "license", "internal", "copy", "path", "assets", "docs", "crewai", "com", "docs", "crewai", "com", "en", "concepts", "knowledge", "71bc45159c09", "webp", "caption", "dark", "logo", "credit_name", "docs", "crewai", "com", "credit_url", "https", "mintlify", "s3", "us", "west", "1", "amazonaws", "com", "crewai", "images", "crew_only_logo", "png", "license", "internal", "copy", "updated_at", "2025", "08", "17", "completed", "false", "docs", "crewai", "com", "en", "concepts", "knowledge", "synthesis", "todo", "what", "is", "knowledge", "in", "crewai", "and", "how", "to", "use", "it", "knowledge", "directory", "at", "the", "root", "of", "your", "project", "also", "use", "relative", "paths", "from", "the", "knowledge", "directory", "when", "creating", "the", "source", "from", "crewai", "import", "agent", "task", "crew", "process", "llm", "from", "crewai", "knowledge", "source", "string_knowledge_source", "import", "stringknowledgesource", "create", "a", "knowledge", "source", "content", "users", "name", "is", "john", "he", "is", "30", "years", "old", "and", "lives", "in", "san", "francisco", "string_source", "stringknowledgesource", "content", "content", "create", "an", "llm", "with", "a", "temperature", "of", "0", "to", "ensure", "deterministic", "outputs", "llm", "llm", "model", "gpt", "4o", "mini", "temperature", "0", "create", "an", "agent", "with", "the", "knowledge", "store", "agent", "agent", "role", "about", "user", "goal", "you", "know", "everything", "about", "the", "user", "backstory", "you", "are", "a", "master", "at", "understanding", "people", "and", "their", "preferences", "verbose", "true", "allow_delegation", "false", "llm", "llm", "task", "task", "description", "answer", "the", "following", "questions", "about", "the", "user", "question", "expected_output", "an", "answer", "to", "the", "question", "agent", "agent", "crew", "crew", "agents", "agent", "tasks", "task", "verbose", "true", "process", "process", "sequential", "knowledge_sources", "string_source", "enable", "knowledge", "by", "adding", "the", "sources", "here", "result", "crew", "kickoff", "inputs", "question", "what", "city", "does", "john", "live", "in", "and", "how", "old", "is", "he", "docling", "for", "the", "following", "example", "to", "work", "uv", "add", "docling", "from", "crewai", "import", "llm", "agent", "crew", "process", "task", "from", "crewai", "knowledge", "source", "crew_docling_source", "import", "crewdoclingsource", "create", "a", "knowledge", "source", "from", "web", "content", "content_source", "crewdoclingsource", "file_paths", "https", "lilianweng", "github", "io", "posts", "2024", "11", "28", "reward", "hacking", "https", "lilianweng", "github", "io", "posts", "2024", "07", "07", "hallucination", "create", "an", "llm", "with", "a", "temperature", "of", "0", "to", "ensure", "deterministic", "outputs", "llm", "llm", "model", "gpt", "4o", "mini", "temperature", "0", "create", "an", "agent", "with", "the", "knowledge", "store", "agent", "agent", "role", "about", "papers", "goal", "you", "know", "everything", "about", "the", "papers", "backstory", "you", "are", "a", "master", "at", "understanding", "papers", "and", "their", "content", "verbose", "true", "allow_delegation", "false", "llm", "llm", "task", "task", "description", "answer", "the", "following", "questions", "about", "the", "papers", "question", "expected_output", "an", "answer", "to", "the", "question", "agent", "agent", "crew", "crew", "agents", "agent", "tasks", "task", "verbose", "true", "process", "process", "sequential", "knowledge_sources", "content_source", "result", "crew", "kickoff", "inputs", "question", "what", "is", "the", "reward", "hacking", "paper", "about", "be", "sure", "to", "provide", "sources", "from", "crewai", "knowledge", "source", "text_file_knowledge_source", "import", "textfileknowledgesource", "text_source", "textfileknowledgesource", "file_paths", "document", "txt", "another", "txt", "from", "crewai", "knowledge", "source", "pdf_knowledge_source", "import", "pdfknowledgesource", "pdf_source", "pdfknowledgesource", "file_paths", "document", "pdf", "another", "pdf", "from", "crewai", "knowledge", "source", "csv_knowledge_source", "import", "csvknowledgesource", "csv_source", "csvknowledgesource", "file_paths", "data", "csv", "from", "crewai", "knowledge", "source", "excel_knowledge_source", "import", "excelknowledgesource", "excel_source", "excelknowledgesource", "file_paths", "spreadsheet", "xlsx", "from", "crewai", "knowledge", "source", "json_knowledge_source", "import", "jsonknowledgesource", "json_source", "jsonknowledgesource", "file_paths", "data", "json", "from", "crewai", "import", "agent", "task", "crew", "from", "crewai", "knowledge", "source", "string_knowledge_source", "import", "stringknowledgesource", "agent", "with", "its", "own", "knowledge", "no", "crew", "knowledge", "needed", "specialist_knowledge", "stringknowledgesource", "content", "specialized", "technical", "information", "for", "this", "agent", "only", "specialist_agent", "agent", "role", "technical", "specialist", "goal", "provide", "technical", "expertise", "backstory", "expert", "in", "specialized", "technical", "domains", "knowledge_sources", "specialist_knowledge", "agent", "specific", "knowledge", "task", "task", "description", "answer", "technical", "questions", "agent", "specialist_agent", "expected_output", "technical", "answer", "no", "crew", "level", "knowledge", "required", "crew", "crew", "agents", "specialist_agent", "tasks", "task", "result", "crew", "kickoff", "agent", "knowledge", "works", "independently", "crew", "kickoff", "crew", "kickoff", "here", "s", "the", "exact", "sequence", "during", "kickoff", "for", "agent", "in", "self", "agents", "agent", "crew", "self", "agent", "gets", "reference", "to", "crew", "agent", "set_knowledge", "crew_embedder", "self", "embedder", "agent", "knowledge", "initialized", "agent", "create_agent_executor", "agent", "knowledge", "storage", "agent_collection_name", "agent", "role", "e", "g", "technical", "specialist", "crew", "knowledge", "storage", "crew_collection_name", "crew", "both", "stored", "in", "same", "chromadb", "instance", "but", "different", "collections", "path", "local", "share", "crewai", "project", "knowledge", "crew", "crew", "knowledge", "collection", "technical", "specialist", "agent", "knowledge", "collection", "another", "agent", "role", "another", "agent", "s", "collection", "from", "crewai", "import", "agent", "task", "crew", "from", "crewai", "knowledge", "source", "string_knowledge_source", "import", "stringknowledgesource", "agent", "specific", "knowledge", "agent_knowledge", "stringknowledgesource", "content", "agent", "specific", "information", "that", "only", "this", "agent", "needs", "agent", "agent", "role", "specialist", "goal", "use", "specialized", "knowledge", "backstory", "expert", "with", "specific", "knowledge", "knowledge_sources", "agent_knowledge", "embedder", "agent", "can", "have", "its", "own", "embedder", "provider", "openai", "config", "model", "text", "embedding", "3", "small", "task", "task", "description", "answer", "using", "your", "specialized", "knowledge", "agent", "agent", "expected_output", "answer", "based", "on", "agent", "knowledge", "no", "crew", "knowledge", "needed", "crew", "crew", "agents", "agent", "tasks", "task", "result", "crew", "kickoff", "works", "perfectly", "crew", "wide", "knowledge", "shared", "by", "all", "agents", "crew_knowledge", "stringknowledgesource", "content", "company", "policies", "and", "general", "information", "for", "all", "agents", "agent", "specific", "knowledge", "specialist_knowledge", "stringknowledgesource", "content", "technical", "specifications", "only", "the", "specialist", "needs", "specialist", "agent", "role", "technical", "specialist", "goal", "provide", "technical", "expertise", "backstory", "technical", "expert", "knowledge_sources", "specialist_knowledge", "agent", "specific", "generalist", "agent", "role", "general", "assistant", "goal", "provide", "general", "assistance", "backstory", "general", "helper", "no", "agent", "specific", "knowledge", "crew", "crew", "agents", "specialist", "generalist", "tasks", "knowledge_sources", "crew_knowledge", "crew", "wide", "knowledge", "result", "specialist", "gets", "crew_knowledge", "specialist_knowledge", "generalist", "gets", "crew_knowledge", "only", "different", "knowledge", "for", "different", "agents", "sales_knowledge", "stringknowledgesource", "content", "sales", "procedures", "and", "pricing", "tech_knowledge", "stringknowledgesource", "content", "technical", "documentation", "support_knowledge", "stringknowledgesource", "content", "support", "procedures", "sales_agent", "agent", "role", "sales", "representative", "knowledge_sources", "sales_knowledge", "embedder", "provider", "openai", "config", "model", "text", "embedding", "3", "small", "tech_agent", "agent", "role", "technical", "expert", "knowledge_sources", "tech_knowledge", "embedder", "provider", "ollama", "config", "model", "mxbai", "embed", "large", "support_agent", "agent", "role", "support", "specialist", "knowledge_sources", "support_knowledge", "will", "use", "crew", "embedder", "as", "fallback", "crew", "crew", "agents", "sales_agent", "tech_agent", "support_agent", "tasks", "embedder", "fallback", "embedder", "for", "agents", "without", "their", "own", "provider", "google", "config", "model", "text", "embedding", "004", "each", "agent", "gets", "only", "their", "specific", "knowledge", "each", "can", "use", "different", "embedding", "providers", "from", "crewai", "knowledge", "knowledge_config", "import", "knowledgeconfig", "knowledge_config", "knowledgeconfig", "results_limit", "10", "score_threshold", "0", "5", "agent", "agent", "knowledge_config", "knowledge_config", "results_limit", "is", "the", "number", "of", "relevant", "documents", "to", "return", "default", "is", "3", "score_threshold", "is", "the", "minimum", "score", "for", "a", "document", "to", "be", "considered", "relevant", "default", "is", "0", "35", "library", "application", "support", "crewai", "project_name", "knowledge", "knowledge", "chromadb", "files", "chroma", "sqlite3", "chromadb", "metadata", "collection_id", "vector", "embeddings", "knowledge_", "collection", "named", "collections", "local", "share", "crewai", "project_name", "knowledge", "chroma", "sqlite3", "collection_id", "knowledge_", "collection", "c", "users", "username", "appdata", "local", "crewai", "project_name", "knowledge", "chroma", "sqlite3", "collection_id", "knowledge_", "collection", "from", "crewai", "utilities", "paths", "import", "db_storage_path", "import", "os", "get", "the", "knowledge", "storage", "path", "knowledge_path", "os", "path", "join", "db_storage_path", "knowledge", "print", "f", "knowledge", "storage", "location", "knowledge_path", "list", "knowledge", "collections", "and", "files", "if", "os", "path", "exists", "knowledge_path", "print", "nknowledge", "storage", "contents", "for", "item", "in", "os", "listdir", "knowledge_path", "item_path", "os", "path", "join", "knowledge_path", "item", "if", "os", "path", "isdir", "item_path", "print", "f", "collection", "item", "show", "collection", "contents", "try", "for", "subitem", "in", "os", "listdir", "item_path", "print", "f", "subitem", "except", "permissionerror", "print", "f", "permission", "denied", "else", "print", "f", "item", "else", "print", "no", "knowledge", "storage", "found", "yet", "import", "os", "from", "crewai", "import", "crew", "set", "custom", "storage", "location", "for", "all", "crewai", "data", "os", "environ", "crewai_storage_dir", "my_project_storage", "all", "knowledge", "will", "now", "be", "stored", "in", "my_project_storage", "knowledge", "crew", "crew", "agents", "tasks", "knowledge_sources", "from", "crewai", "knowledge", "storage", "knowledge_storage", "import", "knowledgestorage", "from", "crewai", "knowledge", "source", "string_knowledge_source", "import", "stringknowledgesource", "create", "custom", "storage", "with", "specific", "embedder", "custom_storage", "knowledgestorage", "embedder", "provider", "ollama", "config", "model", "mxbai", "embed", "large", "collection_name", "my_custom_knowledge", "use", "with", "knowledge", "sources", "knowledge_source", "stringknowledgesource", "content", "your", "knowledge", "content", "here", "knowledge_source", "storage", "custom_storage", "import", "os", "from", "pathlib", "import", "path", "store", "knowledge", "in", "project", "directory", "project_root", "path", "__file__", "parent", "knowledge_dir", "project_root", "knowledge_storage", "os", "environ", "crewai_storage_dir", "str", "knowledge_dir", "now", "all", "knowledge", "will", "be", "stored", "in", "your", "project", "directory", "text", "embedding", "3", "small", "for", "knowledge", "storage", "even", "when", "using", "different", "llm", "providers", "you", "can", "easily", "customize", "this", "to", "match", "your", "setup", "from", "crewai", "import", "agent", "crew", "llm", "from", "crewai", "knowledge", "source", "string_knowledge_source", "import", "stringknowledgesource", "when", "using", "claude", "as", "your", "llm", "agent", "agent", "role", "researcher", "goal", "research", "topics", "backstory", "expert", "researcher", "llm", "llm", "provider", "anthropic", "model", "claude", "3", "sonnet", "using", "claude", "crewai", "will", "still", "use", "openai", "embeddings", "by", "default", "for", "knowledge", "this", "ensures", "consistency", "but", "may", "not", "match", "your", "llm", "provider", "preference", "knowledge_source", "stringknowledgesource", "content", "research", "data", "crew", "crew", "agents", "agent", "tasks", "knowledge_sources", "knowledge_source", "default", "uses", "openai", "embeddings", "even", "with", "claude", "llm", "option", "1", "use", "voyage", "ai", "recommended", "by", "anthropic", "for", "claude", "users", "crew", "crew", "agents", "agent", "tasks", "knowledge_sources", "knowledge_source", "embedder", "provider", "voyageai", "recommended", "for", "claude", "users", "config", "api_key", "your", "voyage", "api", "key", "model", "voyage", "3", "or", "voyage", "3", "large", "for", "best", "quality", "option", "2", "use", "local", "embeddings", "no", "external", "api", "calls", "crew", "crew", "agents", "agent", "tasks", "knowledge_sources", "knowledge_source", "embedder", "provider", "ollama", "config", "model", "mxbai", "embed", "large", "url", "http", "localhost", "11434", "api", "embeddings", "option", "3", "agent", "level", "embedding", "customization", "agent", "agent", "role", "researcher", "goal", "research", "topics", "backstory", "expert", "researcher", "knowledge_sources", "knowledge_source", "embedder", "provider", "google", "config", "model", "models", "text", "embedding", "004", "api_key", "your", "google", "key", "agent", "agent", "role", "researcher", "goal", "research", "topics", "backstory", "expert", "researcher", "knowledge_sources", "knowledge_source", "embedder", "provider", "azure", "config", "api_key", "your", "azure", "api", "key", "model", "text", "embedding", "ada", "002", "change", "to", "the", "model", "you", "are", "using", "and", "is", "deployed", "in", "azure", "api_base", "https", "your", "azure", "endpoint", "openai", "azure", "com", "api_version", "2024", "02", "01", "_get_knowledge_search_query", "method", "is", "triggered", "original", "task", "prompt", "task_prompt", "answer", "the", "following", "questions", "about", "the", "user", "s", "favorite", "movies", "what", "movie", "did", "john", "watch", "last", "week", "format", "your", "answer", "in", "json", "behind", "the", "scenes", "this", "might", "be", "rewritten", "as", "rewritten_query", "what", "movies", "did", "john", "watch", "last", "week", "from", "crewai", "utilities", "events", "import", "knowledgeretrievalstartedevent", "knowledgeretrievalcompletedevent", "from", "crewai", "utilities", "events", "base_event_listener", "import", "baseeventlistener", "class", "knowledgemonitorlistener", "baseeventlistener", "def", "setup_listeners", "self", "crewai_event_bus", "crewai_event_bus", "on", "knowledgeretrievalstartedevent", "def", "on_knowledge_retrieval_started", "source", "event", "print", "f", "agent", "event", "agent", "role", "started", "retrieving", "knowledge", "crewai_event_bus", "on", "knowledgeretrievalcompletedevent", "def", "on_knowledge_retrieval_completed", "source", "event", "print", "f", "agent", "event", "agent", "role", "completed", "knowledge", "retrieval", "print", "f", "query", "event", "query", "print", "f", "retrieved", "len", "event", "retrieved_knowledge", "knowledge", "chunks", "create", "an", "instance", "of", "your", "listener", "knowledge_monitor", "knowledgemonitorlistener", "baseknowledgesource", "class", "let", "s", "create", "a", "practical", "example", "that", "fetches", "and", "processes", "space", "news", "articles", "from", "crewai", "import", "agent", "task", "crew", "process", "llm", "from", "crewai", "knowledge", "source", "base_knowledge_source", "import", "baseknowledgesource", "import", "requests", "from", "datetime", "import", "datetime", "from", "typing", "import", "dict", "any", "from", "pydantic", "import", "basemodel", "field", "class", "spacenewsknowledgesource", "baseknowledgesource", "knowledge", "source", "that", "fetches", "data", "from", "space", "news", "api", "api_endpoint", "str", "field", "description", "api", "endpoint", "url", "limit", "int", "field", "default", "10", "description", "number", "of", "articles", "to", "fetch", "def", "load_content", "self", "dict", "any", "str", "fetch", "and", "format", "space", "news", "articles", "try", "response", "requests", "get", "f", "self", "api_endpoint", "limit", "self", "limit", "response", "raise_for_status", "data", "response", "json", "articles", "data", "get", "results", "formatted_data", "self", "validate_content", "articles", "return", "self", "api_endpoint", "formatted_data", "except", "exception", "as", "e", "raise", "valueerror", "f", "failed", "to", "fetch", "space", "news", "str", "e", "def", "validate_content", "self", "articles", "list", "str", "format", "articles", "into", "readable", "text", "formatted", "space", "news", "articles", "n", "n", "for", "article", "in", "articles", "formatted", "f", "title", "article", "title", "published", "article", "published_at", "summary", "article", "summary", "news", "site", "article", "news_site", "url", "article", "url", "return", "formatted", "def", "add", "self", "none", "process", "and", "store", "the", "articles", "content", "self", "load_content", "for", "_", "text", "in", "content", "items", "chunks", "self", "_chunk_text", "text", "self", "chunks", "extend", "chunks", "self", "_save_documents", "create", "knowledge", "source", "recent_news", "spacenewsknowledgesource", "api_endpoint", "https", "api", "spaceflightnewsapi", "net", "v4", "articles", "limit", "10", "create", "specialized", "agent", "space_analyst", "agent", "role", "space", "news", "analyst", "goal", "answer", "questions", "about", "space", "news", "accurately", "and", "comprehensively", "backstory", "you", "are", "a", "space", "industry", "analyst", "with", "expertise", "in", "space", "exploration", "satellite", "technology", "and", "space", "industry", "trends", "you", "excel", "at", "answering", "questions", "about", "space", "news", "and", "providing", "detailed", "accurate", "information", "knowledge_sources", "recent_news", "llm", "llm", "model", "gpt", "4", "temperature", "0", "0", "create", "task", "that", "handles", "user", "questions", "analysis_task", "task", "description", "answer", "this", "question", "about", "space", "news", "user_question", "expected_output", "a", "detailed", "answer", "based", "on", "the", "recent", "space", "news", "articles", "agent", "space_analyst", "create", "and", "run", "the", "crew", "crew", "crew", "agents", "space_analyst", "tasks", "analysis_task", "verbose", "true", "process", "process", "sequential", "example", "usage", "result", "crew", "kickoff", "inputs", "user_question", "what", "are", "the", "latest", "developments", "in", "space", "exploration", "from", "crewai", "import", "agent", "crew", "task", "from", "crewai", "knowledge", "source", "string_knowledge_source", "import", "stringknowledgesource", "knowledge_source", "stringknowledgesource", "content", "test", "knowledge", "agent", "agent", "role", "test", "agent", "goal", "test", "knowledge", "backstory", "testing", "knowledge_sources", "knowledge_source", "crew", "crew", "agents", "agent", "tasks", "task", "before", "kickoff", "knowledge", "not", "initialized", "print", "f", "before", "kickoff", "agent", "knowledge", "getattr", "agent", "knowledge", "none", "crew", "kickoff", "after", "kickoff", "knowledge", "initialized", "print", "f", "after", "kickoff", "agent", "knowledge", "agent", "knowledge", "print", "f", "agent", "knowledge", "collection", "agent", "knowledge", "storage", "collection_name", "print", "f", "number", "of", "sources", "len", "agent", "knowledge", "sources", "import", "os", "from", "crewai", "utilities", "paths", "import", "db_storage_path", "check", "storage", "structure", "storage_path", "db_storage_path", "knowledge_path", "os", "path", "join", "storage_path", "knowledge", "if", "os", "path", "exists", "knowledge_path", "print", "knowledge", "collections", "found", "for", "collection", "in", "os", "listdir", "knowledge_path", "collection_path", "os", "path", "join", "knowledge_path", "collection", "if", "os", "path", "isdir", "collection_path", "print", "f", "collection", "show", "collection", "contents", "for", "item", "in", "os", "listdir", "collection_path", "print", "f", "item", "test", "agent", "knowledge", "retrieval", "if", "hasattr", "agent", "knowledge", "and", "agent", "knowledge", "test_query", "test", "query", "results", "agent", "knowledge", "query", "test_query", "print", "f", "agent", "knowledge", "results", "len", "results", "documents", "found", "test", "crew", "knowledge", "retrieval", "if", "exists", "if", "hasattr", "crew", "knowledge", "and", "crew", "knowledge", "crew_results", "crew", "query_knowledge", "test_query", "print", "f", "crew", "knowledge", "results", "len", "crew_results", "documents", "found", "import", "chromadb", "from", "crewai", "utilities", "paths", "import", "db_storage_path", "import", "os", "connect", "to", "crewai", "s", "knowledge", "chromadb", "knowledge_path", "os", "path", "join", "db_storage_path", "knowledge", "if", "os", "path", "exists", "knowledge_path", "client", "chromadb", "persistentclient", "path", "knowledge_path", "collections", "client", "list_collections", "print", "knowledge", "collections", "for", "collection", "in", "collections", "print", "f", "collection", "name", "collection", "count", "documents", "sample", "a", "few", "documents", "to", "verify", "content", "if", "collection", "count", "0", "sample", "collection", "peek", "limit", "2", "print", "f", "sample", "content", "sample", "documents", "0", "100", "else", "print", "no", "knowledge", "storage", "found", "from", "crewai", "knowledge", "source", "string_knowledge_source", "import", "stringknowledgesource", "create", "a", "test", "knowledge", "source", "test_source", "stringknowledgesource", "content", "test", "knowledge", "content", "for", "debugging", "chunk_size", "100", "small", "chunks", "for", "testing", "chunk_overlap", "20", "check", "chunking", "behavior", "print", "f", "original", "content", "length", "len", "test_source", "content", "print", "f", "chunk", "size", "test_source", "chunk_size", "print", "f", "chunk", "overlap", "test_source", "chunk_overlap", "process", "and", "inspect", "chunks", "test_source", "add", "print", "f", "number", "of", "chunks", "created", "len", "test_source", "chunks", "for", "i", "chunk", "in", "enumerate", "test_source", "chunks", "3", "show", "first", "3", "chunks", "print", "f", "chunk", "i", "1", "chunk", "50", "ensure", "files", "are", "in", "the", "correct", "location", "from", "crewai", "utilities", "constants", "import", "knowledge_directory", "import", "os", "knowledge_dir", "knowledge_directory", "usually", "knowledge", "file_path", "os", "path", "join", "knowledge_dir", "your_file", "pdf", "if", "not", "os", "path", "exists", "file_path", "print", "f", "file", "not", "found", "file_path", "print", "f", "current", "working", "directory", "os", "getcwd", "print", "f", "expected", "knowledge", "directory", "os", "path", "abspath", "knowledge_dir", "this", "happens", "when", "switching", "embedding", "providers", "reset", "knowledge", "storage", "to", "clear", "old", "embeddings", "crew", "reset_memories", "command_type", "knowledge", "or", "use", "consistent", "embedding", "providers", "crew", "crew", "agents", "tasks", "knowledge_sources", "embedder", "provider", "openai", "config", "model", "text", "embedding", "3", "small", "fix", "storage", "permissions", "chmod", "r", "755", "local", "share", "crewai", "verify", "storage", "location", "consistency", "import", "os", "from", "crewai", "utilities", "paths", "import", "db_storage_path", "print", "crewai_storage_dir", "os", "getenv", "crewai_storage_dir", "print", "computed", "storage", "path", "db_storage_path", "print", "knowledge", "path", "os", "path", "join", "db_storage_path", "knowledge", "reset", "only", "agent", "specific", "knowledge", "crew", "reset_memories", "command_type", "agent_knowledge", "reset", "both", "crew", "and", "agent", "knowledge", "crew", "reset_memories", "command_type", "knowledge", "cli", "commands", "crewai", "reset", "memories", "agent", "knowledge", "agent", "knowledge", "only", "crewai", "reset", "memories", "knowledge", "all", "knowledge", "crewai", "reset", "memories", "command", "with", "the", "knowledge", "option", "crewai", "reset", "memories", "knowledge", "content", "organization", "performance", "tips", "one", "time", "knowledge", "knowledge", "management", "production", "best", "practices", "crewai_storage_dir", "to", "a", "known", "location", "in", "production", "light", "logo", "assets", "docs", "crewai", "com", "docs", "crewai", "com", "en", "concepts", "knowledge", "71bc45159c09", "webp", "figcaption", "figure", "1", "credit", "docs", "crewai", "com", "https", "mintlify", "s3", "us", "west", "1", "amazonaws", "com", "crewai", "images", "crew_only_logo", "png", "license", "internal", "copy", "figcaption", "dark", "logo", "assets", "docs", "crewai", "com", "docs", "crewai", "com", "en", "concepts", "knowledge", "71bc45159c09", "webp", "figcaption", "figure", "2", "credit", "docs", "crewai", "com", "https", "mintlify", "s3", "us", "west", "1", "amazonaws", "com", "crewai", "images", "crew_only_logo", "png", "license", "internal", "copy", "figcaption"], ["title", "sources", "slug", "sources", "updated_at", "2025", "08", "16", "sources", "ingested", "source", "pages", "with", "attribution", "and", "image", "credits", "use", "the", "ingestion", "pipeline", "to", "add", "more", "urls", "in", "scripts", "ingest", "allowlist", "txt", "then", "run", "bash", "python3", "scripts", "ingest", "ingest", "py", "all", "sources", "list_sources"], ["title", "github", "com", "anthropics", "anthropic", "cookbook", "tree", "main", "patterns", "agents", "slug", "github", "com", "anthropics", "anthropic", "cookbook", "tree", "main", "patterns", "agents", "tags", "source", "why_for_designers", "todo", "bot_application", "todo", "collaboration_prompts", "what", "retrieval", "strategy", "applies", "here", "sources", "url", "https", "github", "com", "anthropics", "anthropic", "cookbook", "tree", "main", "patterns", "agents", "title", "github", "com", "anthropics", "anthropic", "cookbook", "tree", "main", "patterns", "agents", "author", "license", "internal", "copy", "retrieved_at", "2025", "08", "17", "policy", "copy", "figures", "updated_at", "2025", "08", "17", "completed", "false", "github", "com", "anthropics", "anthropic", "cookbook", "tree", "main", "patterns", "agents", "synthesis", "todo", "we", "read", "every", "piece", "of", "feedback", "and", "take", "your", "input", "very", "seriously", "to", "see", "all", "available", "qualifiers", "see", "our", "documentation", "there", "was", "an", "error", "while", "loading", "please", "reload", "this", "page"], ["title", "python", "langchain", "com", "docs", "concepts", "slug", "python", "langchain", "com", "docs", "concepts", "tags", "source", "why_for_designers", "todo", "bot_application", "todo", "collaboration_prompts", "what", "retrieval", "strategy", "applies", "here", "sources", "url", "https", "python", "langchain", "com", "docs", "concepts", "title", "python", "langchain", "com", "docs", "concepts", "author", "license", "internal", "copy", "retrieved_at", "2025", "08", "17", "policy", "copy", "figures", "updated_at", "2025", "08", "17", "completed", "false", "python", "langchain", "com", "docs", "concepts", "synthesis", "todo", "conceptual", "guide", "this", "guide", "provides", "explanations", "of", "the", "key", "concepts", "behind", "the", "langchain", "framework", "and", "ai", "applications", "more", "broadly", "we", "recommend", "that", "you", "go", "through", "at", "least", "one", "of", "the", "tutorials", "before", "diving", "into", "the", "conceptual", "guide", "this", "will", "provide", "practical", "context", "that", "will", "make", "it", "easier", "to", "understand", "the", "concepts", "discussed", "here", "the", "conceptual", "guide", "does", "not", "cover", "step", "by", "step", "instructions", "or", "specific", "implementation", "examples", "those", "are", "found", "in", "the", "how", "to", "guides", "and", "tutorials", "for", "detailed", "reference", "material", "please", "see", "the", "api", "reference", "high", "level", "why", "langchain", "overview", "of", "the", "value", "that", "langchain", "provides", "architecture", "how", "packages", "are", "organized", "in", "the", "langchain", "ecosystem", "concepts", "chat", "models", "llms", "exposed", "via", "a", "chat", "api", "that", "process", "sequences", "of", "messages", "as", "input", "and", "output", "a", "message", "messages", "the", "unit", "of", "communication", "in", "chat", "models", "used", "to", "represent", "model", "input", "and", "output", "chat", "history", "a", "conversation", "represented", "as", "a", "sequence", "of", "messages", "alternating", "between", "user", "messages", "and", "model", "responses", "tools", "a", "function", "with", "an", "associated", "schema", "defining", "the", "function", "s", "name", "description", "and", "the", "arguments", "it", "accepts", "tool", "calling", "a", "type", "of", "chat", "model", "api", "that", "accepts", "tool", "schemas", "along", "with", "messages", "as", "input", "and", "returns", "invocations", "of", "those", "tools", "as", "part", "of", "the", "output", "message", "structured", "output", "a", "technique", "to", "make", "a", "chat", "model", "respond", "in", "a", "structured", "format", "such", "as", "json", "that", "matches", "a", "given", "schema", "memory", "information", "about", "a", "conversation", "that", "is", "persisted", "so", "that", "it", "can", "be", "used", "in", "future", "conversations", "multimodality", "the", "ability", "to", "work", "with", "data", "that", "comes", "in", "different", "forms", "such", "as", "text", "audio", "images", "and", "video", "runnable", "interface", "the", "base", "abstraction", "that", "many", "langchain", "components", "and", "the", "langchain", "expression", "language", "are", "built", "on", "streaming", "langchain", "streaming", "apis", "for", "surfacing", "results", "as", "they", "are", "generated", "langchain", "expression", "language", "lcel", "a", "syntax", "for", "orchestrating", "langchain", "components", "most", "useful", "for", "simpler", "applications", "document", "loaders", "load", "a", "source", "as", "a", "list", "of", "documents", "retrieval", "information", "retrieval", "systems", "can", "retrieve", "structured", "or", "unstructured", "data", "from", "a", "datasource", "in", "response", "to", "a", "query", "text", "splitters", "split", "long", "text", "into", "smaller", "chunks", "that", "can", "be", "individually", "indexed", "to", "enable", "granular", "retrieval", "embedding", "models", "models", "that", "represent", "data", "such", "as", "text", "or", "images", "in", "a", "vector", "space", "vector", "stores", "storage", "of", "and", "efficient", "search", "over", "vectors", "and", "associated", "metadata", "retriever", "a", "component", "that", "returns", "relevant", "documents", "from", "a", "knowledge", "base", "in", "response", "to", "a", "query", "retrieval", "augmented", "generation", "rag", "a", "technique", "that", "enhances", "language", "models", "by", "combining", "them", "with", "external", "knowledge", "bases", "agents", "use", "a", "language", "model", "to", "choose", "a", "sequence", "of", "actions", "to", "take", "agents", "can", "interact", "with", "external", "resources", "via", "tool", "prompt", "templates", "component", "for", "factoring", "out", "the", "static", "parts", "of", "a", "model", "prompt", "usually", "a", "sequence", "of", "messages", "useful", "for", "serializing", "versioning", "and", "reusing", "these", "static", "parts", "output", "parsers", "responsible", "for", "taking", "the", "output", "of", "a", "model", "and", "transforming", "it", "into", "a", "more", "suitable", "format", "for", "downstream", "tasks", "output", "parsers", "were", "primarily", "useful", "prior", "to", "the", "general", "availability", "of", "tool", "calling", "and", "structured", "outputs", "few", "shot", "prompting", "a", "technique", "for", "improving", "model", "performance", "by", "providing", "a", "few", "examples", "of", "the", "task", "to", "perform", "in", "the", "prompt", "example", "selectors", "used", "to", "select", "the", "most", "relevant", "examples", "from", "a", "dataset", "based", "on", "a", "given", "input", "example", "selectors", "are", "used", "in", "few", "shot", "prompting", "to", "select", "examples", "for", "a", "prompt", "async", "programming", "the", "basics", "that", "one", "should", "know", "to", "use", "langchain", "in", "an", "asynchronous", "context", "callbacks", "callbacks", "enable", "the", "execution", "of", "custom", "auxiliary", "code", "in", "built", "in", "components", "callbacks", "are", "used", "to", "stream", "outputs", "from", "llms", "in", "langchain", "trace", "the", "intermediate", "steps", "of", "an", "application", "and", "more", "tracing", "the", "process", "of", "recording", "the", "steps", "that", "an", "application", "takes", "to", "go", "from", "input", "to", "output", "tracing", "is", "essential", "for", "debugging", "and", "diagnosing", "issues", "in", "complex", "applications", "evaluation", "the", "process", "of", "assessing", "the", "performance", "and", "effectiveness", "of", "ai", "applications", "this", "involves", "testing", "the", "model", "s", "responses", "against", "a", "set", "of", "predefined", "criteria", "or", "benchmarks", "to", "ensure", "it", "meets", "the", "desired", "quality", "standards", "and", "fulfills", "the", "intended", "purpose", "this", "process", "is", "vital", "for", "building", "reliable", "applications", "testing", "the", "process", "of", "verifying", "that", "a", "component", "of", "an", "integration", "or", "application", "works", "as", "expected", "testing", "is", "essential", "for", "ensuring", "that", "the", "application", "behaves", "correctly", "and", "that", "changes", "to", "the", "codebase", "do", "not", "introduce", "new", "bugs", "glossary", "aimessagechunk", "a", "partial", "response", "from", "an", "ai", "message", "used", "when", "streaming", "responses", "from", "a", "chat", "model", "aimessage", "represents", "a", "complete", "response", "from", "an", "ai", "model", "astream_events", "stream", "granular", "information", "from", "lcel", "chains", "basetool", "the", "base", "class", "for", "all", "tools", "in", "langchain", "batch", "use", "to", "execute", "a", "runnable", "with", "batch", "inputs", "bind_tools", "allows", "models", "to", "interact", "with", "tools", "caching", "storing", "results", "to", "avoid", "redundant", "calls", "to", "a", "chat", "model", "chat", "models", "chat", "models", "that", "handle", "multiple", "data", "modalities", "configurable", "runnables", "creating", "configurable", "runnables", "context", "window", "the", "maximum", "size", "of", "input", "a", "chat", "model", "can", "process", "conversation", "patterns", "common", "patterns", "in", "chat", "interactions", "document", "langchain", "s", "representation", "of", "a", "document", "embedding", "models", "models", "that", "generate", "vector", "embeddings", "for", "various", "data", "types", "humanmessage", "represents", "a", "message", "from", "a", "human", "user", "injectedstate", "a", "state", "injected", "into", "a", "tool", "function", "injectedstore", "a", "store", "that", "can", "be", "injected", "into", "a", "tool", "for", "data", "persistence", "injectedtoolarg", "mechanism", "to", "inject", "arguments", "into", "tool", "functions", "input", "and", "output", "types", "types", "used", "for", "input", "and", "output", "in", "runnables", "integration", "packages", "third", "party", "packages", "that", "integrate", "with", "langchain", "integration", "tests", "tests", "that", "verify", "the", "correctness", "of", "the", "interaction", "between", "components", "usually", "run", "with", "access", "to", "the", "underlying", "api", "that", "powers", "an", "integration", "invoke", "a", "standard", "method", "to", "invoke", "a", "runnable", "json", "mode", "returning", "responses", "in", "json", "format", "langchain", "community", "community", "driven", "components", "for", "langchain", "langchain", "core", "core", "langchain", "package", "includes", "base", "interfaces", "and", "in", "memory", "implementations", "langchain", "a", "package", "for", "higher", "level", "components", "e", "g", "some", "pre", "built", "chains", "langgraph", "powerful", "orchestration", "layer", "for", "langchain", "use", "to", "build", "complex", "pipelines", "and", "workflows", "langserve", "used", "to", "deploy", "langchain", "runnables", "as", "rest", "endpoints", "uses", "fastapi", "works", "primarily", "for", "langchain", "runnables", "does", "not", "currently", "integrate", "with", "langgraph", "llms", "legacy", "older", "language", "models", "that", "take", "a", "string", "as", "input", "and", "return", "a", "string", "as", "output", "managing", "chat", "history", "techniques", "to", "maintain", "and", "manage", "the", "chat", "history", "openai", "format", "openai", "s", "message", "format", "for", "chat", "models", "propagation", "of", "runnableconfig", "propagating", "configuration", "through", "runnables", "read", "if", "working", "with", "python", "3", "9", "3", "10", "and", "async", "rate", "limiting", "client", "side", "rate", "limiting", "for", "chat", "models", "removemessage", "an", "abstraction", "used", "to", "remove", "a", "message", "from", "chat", "history", "used", "primarily", "in", "langgraph", "role", "represents", "the", "role", "e", "g", "user", "assistant", "of", "a", "chat", "message", "runnableconfig", "use", "to", "pass", "run", "time", "information", "to", "runnables", "e", "g", "run_name", "run_id", "tags", "metadata", "max_concurrency", "recursion_limit", "configurable", "standard", "parameters", "for", "chat", "models", "parameters", "such", "as", "api", "key", "temperature", "and", "max_tokens", "standard", "tests", "a", "defined", "set", "of", "unit", "and", "integration", "tests", "that", "all", "integrations", "must", "pass", "stream", "use", "to", "stream", "output", "from", "a", "runnable", "or", "a", "graph", "tokenization", "the", "process", "of", "converting", "data", "into", "tokens", "and", "vice", "versa", "tokens", "the", "basic", "unit", "that", "a", "language", "model", "reads", "processes", "and", "generates", "under", "the", "hood", "tool", "artifacts", "add", "artifacts", "to", "the", "output", "of", "a", "tool", "that", "will", "not", "be", "sent", "to", "the", "model", "but", "will", "be", "available", "for", "downstream", "processing", "tool", "binding", "binding", "tools", "to", "models", "tool", "decorator", "for", "creating", "tools", "in", "langchain", "toolkits", "a", "collection", "of", "tools", "that", "can", "be", "used", "together", "toolmessage", "represents", "a", "message", "that", "contains", "the", "results", "of", "a", "tool", "execution", "unit", "tests", "tests", "that", "verify", "the", "correctness", "of", "individual", "components", "run", "in", "isolation", "without", "access", "to", "the", "internet", "vector", "stores", "datastores", "specialized", "for", "storing", "and", "efficiently", "searching", "vector", "embeddings", "with_structured_output", "a", "helper", "method", "for", "chat", "models", "that", "natively", "support", "tool", "calling", "to", "get", "structured", "output", "matching", "a", "given", "schema", "specified", "via", "pydantic", "json", "schema", "or", "a", "function", "with_types", "method", "to", "overwrite", "the", "input", "and", "output", "types", "of", "a", "runnable", "useful", "when", "working", "with", "complex", "lcel", "chains", "and", "deploying", "with", "langserve"]]